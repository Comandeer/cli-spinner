/*! @comandeer/cli-spinner v0.1.0 | (c) 2021 Comandeer | MIT license (see LICENSE) */
"use strict";var e=require("stream");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(require("console-control-strings"));const s=["/","-","\\","|"],i=Symbol("timeout"),n=Symbol("currentFrame"),o=Symbol("showing"),u=r.default.gotoSOL()+r.default.eraseLine();module.exports=class{constructor({stdout:t=process.stdout,label:r="",spinner:u=s,interval:a=80}={}){if(!((h=t)instanceof e.Writable||h instanceof e.Duplex))throw new TypeError("Custom stdout must be a valid writable/duplex stream");var h;if("number"!=typeof a)throw new TypeError("Custom interval must be a valid number");if("string"!=typeof r)throw new TypeError("Custom label must be a valid string");if(!function(e){return Array.isArray(e)&&e.every((e=>"string"==typeof e))}(u))throw new TypeError("Custom spinner must be a valid array of strings");this.stdout=t,this.label=r,this.spinner=u,this.interval=a,this[i]=null,this[n]=0,this[o]=!1}show(){if(this[o])return;const e=()=>{const t=this._prepareSpinnerFrame();this._requestRenderFrame(t).then((()=>{this[i]=setTimeout(e,this.interval)}))};this[o]=!0,this._requestRenderFrame(r.default.hideCursor()).then(e)}hide(){this[o]&&(this[i]&&clearTimeout(this[i]),this._requestRenderFrame(u+r.default.showCursor()).then((()=>{this[n]=0,this[o]=!1})))}_prepareSpinnerFrame(){const e=this.spinner[this[n]++%this.spinner.length];return`${u+e} ${this.label}`}_requestRenderFrame(e){return new Promise((t=>{if(this.stdout.write(e,"utf8"))return t();this.stdout.once("drain",t)}))}};
//# sourceMappingURL=cli-spinner.cjs.map
